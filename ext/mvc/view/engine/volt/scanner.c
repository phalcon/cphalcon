/* Generated by re2c 0.13.5 on Fri Apr 18 17:55:57 2014 */
/* #line 1 "scanner.re" */

/*
  +------------------------------------------------------------------------+
  | Phalcon Framework                                                      |
  +------------------------------------------------------------------------+
  | Copyright (c) 2011-2014 Phalcon Team (http://www.phalconphp.com)       |
  +------------------------------------------------------------------------+
  | This source file is subject to the New BSD License that is bundled     |
  | with this package in the file docs/LICENSE.txt.                        |
  |                                                                        |
  | If you did not receive a copy of the license and are unable to         |
  | obtain it through the world-wide-web, please send an email             |
  | to license@phalconphp.com so we can send you a copy immediately.       |
  +------------------------------------------------------------------------+
  | Authors: Andres Gutierrez <andres@phalconphp.com>                      |
  |          Eduar Carvajal <eduar@phalconphp.com>                         |
  +------------------------------------------------------------------------+
*/

#include "php_phalcon.h"
#include "mvc/view/engine/volt/scanner.h"

#define KKCTYPE unsigned char
#define KKCURSOR (s->start)
#define KKLIMIT (s->end)
#define KKMARKER q

void phvolt_rtrim(phvolt_scanner_token *token) {

	char *cursor, *removed_str;
	int i;
	char ch;

	if (token->len > 0) {

		cursor = token->value;
		cursor += (token->len - 1);
		for (i = token->len; i > 0; i--) {
			ch = (*cursor);
			if (ch == '\t' || ch == '\n' || ch == '\r' || ch == ' ' || ch == '\v') {
				cursor--;
				continue;
			}
			break;
		}

        if (i >= 0) {
    		removed_str = emalloc(i + 1);
    		memcpy(removed_str, token->value, i);
    		removed_str[i] = '\0';

    		efree(token->value);
    		token->value = removed_str;
    		token->len = i;
        }
	}

}

void phvolt_ltrim(phvolt_scanner_token *token) {

	char *cursor, *removed_str;
	int i;

	if (token->len > 0) {

		cursor = token->value;
		for (i = 0; i < token->len; i++) {
			char ch = (*cursor);
			if (ch == '\t' || ch == '\n' || ch == '\r' || ch == ' ' || ch == '\v') {
				cursor++;
				continue;
			}
			break;
		}

        if (i >= 0) {
    		removed_str = emalloc(token->len - i + 1);
    		memcpy(removed_str, token->value + i, token->len - i);
    		removed_str[token->len - i] = '\0';

    		efree(token->value);
    		token->value = removed_str;
    		token->len = token->len - i;
        }
	}

}

int phvolt_get_token(phvolt_scanner_state *s, phvolt_scanner_token *token) {

	unsigned char next, double_next;
	char *q = KKCURSOR, *start = KKCURSOR;
	int status = PHVOLT_SCANNER_RETCODE_IMPOSSIBLE;

	while (PHVOLT_SCANNER_RETCODE_IMPOSSIBLE == status) {

		if (s->mode == PHVOLT_MODE_RAW || s->mode == PHVOLT_MODE_COMMENT) {

			next = '\0';
			double_next = '\0';

			if (*KKCURSOR == '\n') {
				s->active_line++;
			}

			if (*KKCURSOR != '\0') {
				next = *(KKCURSOR + 1);
				if (next != '\0') {
					double_next = *(KKCURSOR + 2);
				}
			}

			if (*KKCURSOR == '\0' || (*KKCURSOR == '{' && (next == '%' || next == '{' || next == '#'))) {

				if (next != '#') {

					s->mode = PHVOLT_MODE_CODE;

					if (s->raw_buffer_cursor > 0) {

						token->opcode = PHVOLT_T_RAW_FRAGMENT;
						token->value = emalloc(sizeof(char) * s->raw_buffer_cursor + 1);
						memcpy(token->value, s->raw_buffer, s->raw_buffer_cursor);
						token->value[s->raw_buffer_cursor] = 0;
						token->len = s->raw_buffer_cursor;

						if (s->whitespace_control == 1) {
							phvolt_ltrim(token);
							s->whitespace_control = 0;
						}

						if (double_next == '-') {
							phvolt_rtrim(token);
						}

						s->raw_buffer_cursor = 0;
						q = KKCURSOR;
					} else {
						token->opcode = PHVOLT_T_IGNORE;
					}

				} else {

					while ((next = *(++KKCURSOR))) {
						if (next == '#' && *(KKCURSOR + 1) == '}') {
							KKCURSOR+=2;
							token->opcode = PHVOLT_T_IGNORE;
							return 0;
						} else {
							if (next == '\n') {
								s->active_line++;
							}
						}
					}

					return PHVOLT_SCANNER_RETCODE_EOF;
				}

				return 0;

			} else {

				if (s->raw_buffer_cursor == s->raw_buffer_size) {
					s->raw_buffer_size += PHVOLT_RAW_BUFFER_SIZE;
					s->raw_buffer = erealloc(s->raw_buffer, s->raw_buffer_size);
				}

				memcpy(s->raw_buffer+s->raw_buffer_cursor, KKCURSOR, 1);
				s->raw_buffer_cursor++;

				++KKCURSOR;
			}

		} else {

		
/* #line 181 "scanner.c" */
		{
			KKCTYPE kkch;
			unsigned int kkaccept = 0;
			static const unsigned char kkbm[] = {
				  0,  96,  96,  96,  96,  96,  96,  96, 
				 96, 104,  96,  96,  96, 104,  96,  96, 
				 96,  96,  96,  96,  96,  96,  96,  96, 
				 96,  96,  96,  96,  96,  96,  96,  96, 
				104,  96,  32,  96,  96,  96,  96,  64, 
				 96,  96,  96,  96,  96,  96,  96,  96, 
				240, 240, 240, 240, 240, 240, 240, 240, 
				240, 240,  96,  96,  96,  96,  96,  96, 
				 96, 112, 112, 112, 112, 112, 112, 112, 
				112, 112, 112, 112, 112, 112, 112, 112, 
				112, 112, 112, 112, 112, 112, 112, 112, 
				112, 112, 112,  96,  16,  96,  96, 112, 
				 96, 112, 112, 112, 112, 112, 112, 112, 
				112, 112, 112, 112, 112, 112, 112, 112, 
				112, 112, 112, 112, 112, 112, 112, 112, 
				112, 112, 112,  96,  96,  96,  96,  96, 
				 96,  96,  96,  96,  96,  96,  96,  96, 
				 96,  96,  96,  96,  96,  96,  96,  96, 
				 96,  96,  96,  96,  96,  96,  96,  96, 
				 96,  96,  96,  96,  96,  96,  96,  96, 
				 96,  96,  96,  96,  96,  96,  96,  96, 
				 96,  96,  96,  96,  96,  96,  96,  96, 
				 96,  96,  96,  96,  96,  96,  96,  96, 
				 96,  96,  96,  96,  96,  96,  96,  96, 
				 96,  96,  96,  96,  96,  96,  96,  96, 
				 96,  96,  96,  96,  96,  96,  96,  96, 
				 96,  96,  96,  96,  96,  96,  96,  96, 
				 96,  96,  96,  96,  96,  96,  96,  96, 
				 96,  96,  96,  96,  96,  96,  96,  96, 
				 96,  96,  96,  96,  96,  96,  96,  96, 
				 96,  96,  96,  96,  96,  96,  96,  96, 
				 96,  96,  96,  96,  96,  96,  96,  96, 
			};

			kkch = *KKCURSOR;
			switch (kkch) {
			case 0x00:	goto kk70;
			case '\t':
			case '\r':
			case ' ':	goto kk66;
			case '\n':	goto kk68;
			case '!':	goto kk58;
			case '"':	goto kk27;
			case '%':	goto kk21;
			case '\'':	goto kk29;
			case '(':	goto kk44;
			case ')':	goto kk46;
			case '*':	goto kk34;
			case '+':	goto kk32;
			case ',':	goto kk42;
			case '-':	goto kk23;
			case '.':	goto kk40;
			case '/':	goto kk36;
			case '0':
			case '1':
			case '2':
			case '3':
			case '4':
			case '5':
			case '6':
			case '7':
			case '8':
			case '9':	goto kk2;
			case ':':	goto kk62;
			case '<':	goto kk52;
			case '=':	goto kk54;
			case '>':	goto kk56;
			case '?':	goto kk64;
			case 'A':
			case 'a':	goto kk11;
			case 'B':
			case 'b':	goto kk13;
			case 'C':
			case 'c':	goto kk15;
			case 'D':
			case 'd':	goto kk18;
			case 'E':
			case 'e':	goto kk6;
			case 'F':
			case 'f':	goto kk7;
			case 'G':
			case 'H':
			case 'J':
			case 'K':
			case 'L':
			case 'P':
			case 'Q':
			case 'U':
			case 'V':
			case 'X':
			case 'Y':
			case 'Z':
			case '_':
			case 'g':
			case 'h':
			case 'j':
			case 'k':
			case 'l':
			case 'p':
			case 'q':
			case 'u':
			case 'v':
			case 'x':
			case 'y':
			case 'z':	goto kk31;
			case 'I':
			case 'i':	goto kk4;
			case 'M':
			case 'm':	goto kk14;
			case 'N':
			case 'n':	goto kk9;
			case 'O':
			case 'o':	goto kk12;
			case 'R':
			case 'r':	goto kk17;
			case 'S':
			case 's':	goto kk8;
			case 'T':
			case 't':	goto kk10;
			case 'W':
			case 'w':	goto kk16;
			case '[':	goto kk48;
			case '\\':	goto kk30;
			case ']':	goto kk50;
			case '{':	goto kk19;
			case '|':	goto kk60;
			case '}':	goto kk25;
			case '~':	goto kk38;
			default:	goto kk72;
			}
kk2:
			kkaccept = 0;
			kkch = *(KKMARKER = ++KKCURSOR);
			goto kk298;
kk3:
/* #line 182 "scanner.re" */
			{
			token->opcode = PHVOLT_T_INTEGER;
			token->value = estrndup(start, KKCURSOR - start);
			token->len = KKCURSOR - start;
			q = KKCURSOR;
			return 0;
		}
/* #line 329 "scanner.c" */
kk4:
			++KKCURSOR;
			if ((kkch = *KKCURSOR) <= 'S') {
				if (kkch <= 'M') {
					if (kkch == 'F') goto kk284;
					goto kk100;
				} else {
					if (kkch <= 'N') goto kk286;
					if (kkch <= 'R') goto kk100;
					goto kk288;
				}
			} else {
				if (kkch <= 'm') {
					if (kkch == 'f') goto kk284;
					goto kk100;
				} else {
					if (kkch <= 'n') goto kk286;
					if (kkch == 's') goto kk288;
					goto kk100;
				}
			}
kk5:
/* #line 453 "scanner.re" */
			{
			token->opcode = PHVOLT_T_IDENTIFIER;
			token->value = estrndup(start, KKCURSOR - start);
			token->len = KKCURSOR - start;
			q = KKCURSOR;
			return 0;
		}
/* #line 360 "scanner.c" */
kk6:
			kkch = *++KKCURSOR;
			if (kkch <= 'X') {
				if (kkch <= 'M') {
					if (kkch == 'L') goto kk225;
					goto kk100;
				} else {
					if (kkch <= 'N') goto kk226;
					if (kkch <= 'W') goto kk100;
					goto kk227;
				}
			} else {
				if (kkch <= 'm') {
					if (kkch == 'l') goto kk225;
					goto kk100;
				} else {
					if (kkch <= 'n') goto kk226;
					if (kkch == 'x') goto kk227;
					goto kk100;
				}
			}
kk7:
			kkch = *++KKCURSOR;
			if (kkch <= 'O') {
				if (kkch == 'A') goto kk217;
				if (kkch <= 'N') goto kk100;
				goto kk218;
			} else {
				if (kkch <= 'a') {
					if (kkch <= '`') goto kk100;
					goto kk217;
				} else {
					if (kkch == 'o') goto kk218;
					goto kk100;
				}
			}
kk8:
			kkch = *++KKCURSOR;
			if (kkch == 'E') goto kk214;
			if (kkch == 'e') goto kk214;
			goto kk100;
kk9:
			kkch = *++KKCURSOR;
			if (kkch <= 'U') {
				if (kkch == 'O') goto kk207;
				if (kkch <= 'T') goto kk100;
				goto kk208;
			} else {
				if (kkch <= 'o') {
					if (kkch <= 'n') goto kk100;
					goto kk207;
				} else {
					if (kkch == 'u') goto kk208;
					goto kk100;
				}
			}
kk10:
			kkch = *++KKCURSOR;
			if (kkch == 'R') goto kk203;
			if (kkch == 'r') goto kk203;
			goto kk100;
kk11:
			kkch = *++KKCURSOR;
			if (kkch <= 'U') {
				if (kkch == 'N') goto kk190;
				if (kkch <= 'T') goto kk100;
				goto kk191;
			} else {
				if (kkch <= 'n') {
					if (kkch <= 'm') goto kk100;
					goto kk190;
				} else {
					if (kkch == 'u') goto kk191;
					goto kk100;
				}
			}
kk12:
			kkch = *++KKCURSOR;
			if (kkch == 'R') goto kk188;
			if (kkch == 'r') goto kk188;
			goto kk100;
kk13:
			kkch = *++KKCURSOR;
			if (kkch <= 'R') {
				if (kkch == 'L') goto kk178;
				if (kkch <= 'Q') goto kk100;
				goto kk179;
			} else {
				if (kkch <= 'l') {
					if (kkch <= 'k') goto kk100;
					goto kk178;
				} else {
					if (kkch == 'r') goto kk179;
					goto kk100;
				}
			}
kk14:
			kkch = *++KKCURSOR;
			if (kkch == 'A') goto kk173;
			if (kkch == 'a') goto kk173;
			goto kk100;
kk15:
			kkch = *++KKCURSOR;
			if (kkch <= 'O') {
				if (kkch == 'A') goto kk157;
				if (kkch <= 'N') goto kk100;
				goto kk158;
			} else {
				if (kkch <= 'a') {
					if (kkch <= '`') goto kk100;
					goto kk157;
				} else {
					if (kkch == 'o') goto kk158;
					goto kk100;
				}
			}
kk16:
			kkch = *++KKCURSOR;
			if (kkch == 'I') goto kk153;
			if (kkch == 'i') goto kk153;
			goto kk100;
kk17:
			kkch = *++KKCURSOR;
			if (kkch == 'E') goto kk141;
			if (kkch == 'e') goto kk141;
			goto kk100;
kk18:
			kkch = *++KKCURSOR;
			if (kkch <= 'O') {
				if (kkch == 'E') goto kk132;
				if (kkch <= 'N') goto kk100;
				goto kk133;
			} else {
				if (kkch <= 'e') {
					if (kkch <= 'd') goto kk100;
					goto kk132;
				} else {
					if (kkch == 'o') goto kk133;
					goto kk100;
				}
			}
kk19:
			++KKCURSOR;
			if ((kkch = *KKCURSOR) == '%') goto kk126;
			if (kkch == '{') goto kk124;
/* #line 536 "scanner.re" */
			{
			token->opcode = PHVOLT_T_CBRACKET_OPEN;
			return 0;
		}
/* #line 511 "scanner.c" */
kk21:
			++KKCURSOR;
			if ((kkch = *KKCURSOR) == '}') goto kk122;
/* #line 481 "scanner.re" */
			{
			token->opcode = PHVOLT_T_MOD;
			return 0;
		}
/* #line 520 "scanner.c" */
kk23:
			kkaccept = 1;
			kkch = *(KKMARKER = ++KKCURSOR);
			if (kkch <= '-') {
				if (kkch == '%') goto kk117;
				if (kkch >= '-') goto kk114;
			} else {
				if (kkch <= '=') {
					if (kkch >= '=') goto kk112;
				} else {
					if (kkch == '}') goto kk116;
				}
			}
kk24:
/* #line 466 "scanner.re" */
			{
			token->opcode = PHVOLT_T_SUB;
			return 0;
		}
/* #line 540 "scanner.c" */
kk25:
			++KKCURSOR;
			if ((kkch = *KKCURSOR) == '}') goto kk110;
/* #line 541 "scanner.re" */
			{
			token->opcode = PHVOLT_T_CBRACKET_CLOSE;
			return 0;
		}
/* #line 549 "scanner.c" */
kk27:
			kkaccept = 2;
			kkch = *(KKMARKER = ++KKCURSOR);
			if (kkch >= 0x01) goto kk108;
kk28:
/* #line 652 "scanner.re" */
			{
			status = PHVOLT_SCANNER_RETCODE_ERR;
			break;
		}
/* #line 560 "scanner.c" */
kk29:
			kkaccept = 2;
			kkch = *(KKMARKER = ++KKCURSOR);
			if (kkch <= 0x00) goto kk28;
			goto kk102;
kk30:
			kkch = *++KKCURSOR;
			if (kkch <= '^') {
				if (kkch <= '@') goto kk28;
				if (kkch <= 'Z') goto kk99;
				goto kk28;
			} else {
				if (kkch == '`') goto kk28;
				if (kkch <= 'z') goto kk99;
				goto kk28;
			}
kk31:
			kkch = *++KKCURSOR;
			goto kk100;
kk32:
			++KKCURSOR;
			if ((kkch = *KKCURSOR) == '+') goto kk97;
			if (kkch == '=') goto kk95;
/* #line 461 "scanner.re" */
			{
			token->opcode = PHVOLT_T_ADD;
			return 0;
		}
/* #line 589 "scanner.c" */
kk34:
			++KKCURSOR;
			if ((kkch = *KKCURSOR) == '=') goto kk93;
/* #line 471 "scanner.re" */
			{
			token->opcode = PHVOLT_T_MUL;
			return 0;
		}
/* #line 598 "scanner.c" */
kk36:
			++KKCURSOR;
			if ((kkch = *KKCURSOR) == '=') goto kk91;
/* #line 476 "scanner.re" */
			{
			token->opcode = PHVOLT_T_DIV;
			return 0;
		}
/* #line 607 "scanner.c" */
kk38:
			++KKCURSOR;
/* #line 496 "scanner.re" */
			{
			token->opcode = PHVOLT_T_CONCAT;
			return 0;
		}
/* #line 615 "scanner.c" */
kk40:
			++KKCURSOR;
			if ((kkch = *KKCURSOR) == '.') goto kk89;
/* #line 506 "scanner.re" */
			{
			token->opcode = PHVOLT_T_DOT;
			return 0;
		}
/* #line 624 "scanner.c" */
kk42:
			++KKCURSOR;
/* #line 511 "scanner.re" */
			{
			token->opcode = PHVOLT_T_COMMA;
			return 0;
		}
/* #line 632 "scanner.c" */
kk44:
			++KKCURSOR;
/* #line 516 "scanner.re" */
			{
			token->opcode = PHVOLT_T_PARENTHESES_OPEN;
			return 0;
		}
/* #line 640 "scanner.c" */
kk46:
			++KKCURSOR;
/* #line 521 "scanner.re" */
			{
			token->opcode = PHVOLT_T_PARENTHESES_CLOSE;
			return 0;
		}
/* #line 648 "scanner.c" */
kk48:
			++KKCURSOR;
/* #line 526 "scanner.re" */
			{
			token->opcode = PHVOLT_T_SBRACKET_OPEN;
			return 0;
		}
/* #line 656 "scanner.c" */
kk50:
			++KKCURSOR;
/* #line 531 "scanner.re" */
			{
			token->opcode = PHVOLT_T_SBRACKET_CLOSE;
			return 0;
		}
/* #line 664 "scanner.c" */
kk52:
			++KKCURSOR;
			if ((kkch = *KKCURSOR) <= '<') goto kk53;
			if (kkch <= '=') goto kk87;
			if (kkch <= '>') goto kk85;
kk53:
/* #line 611 "scanner.re" */
			{
			token->opcode = PHVOLT_T_LESS;
			return 0;
		}
/* #line 676 "scanner.c" */
kk54:
			++KKCURSOR;
			if ((kkch = *KKCURSOR) == '=') goto kk81;
/* #line 551 "scanner.re" */
			{
			token->opcode = PHVOLT_T_ASSIGN;
			return 0;
		}
/* #line 685 "scanner.c" */
kk56:
			++KKCURSOR;
			if ((kkch = *KKCURSOR) == '=') goto kk79;
/* #line 616 "scanner.re" */
			{
			token->opcode = PHVOLT_T_GREATER;
			return 0;
		}
/* #line 694 "scanner.c" */
kk58:
			++KKCURSOR;
			if ((kkch = *KKCURSOR) == '=') goto kk75;
/* #line 606 "scanner.re" */
			{
			token->opcode = PHVOLT_T_NOT;
			return 0;
		}
/* #line 703 "scanner.c" */
kk60:
			++KKCURSOR;
/* #line 621 "scanner.re" */
			{
			token->opcode = PHVOLT_T_PIPE;
			return 0;
		}
/* #line 711 "scanner.c" */
kk62:
			++KKCURSOR;
/* #line 626 "scanner.re" */
			{
			token->opcode = PHVOLT_T_COLON;
			return 0;
		}
/* #line 719 "scanner.c" */
kk64:
			++KKCURSOR;
/* #line 631 "scanner.re" */
			{
			token->opcode = PHVOLT_T_QUESTION;
			return 0;
		}
/* #line 727 "scanner.c" */
kk66:
			++KKCURSOR;
			kkch = *KKCURSOR;
			goto kk74;
kk67:
/* #line 636 "scanner.re" */
			{
			token->opcode = PHVOLT_T_IGNORE;
			return 0;
		}
/* #line 738 "scanner.c" */
kk68:
			++KKCURSOR;
/* #line 641 "scanner.re" */
			{
			s->active_line++;
			token->opcode = PHVOLT_T_IGNORE;
			return 0;
		}
/* #line 747 "scanner.c" */
kk70:
			++KKCURSOR;
/* #line 647 "scanner.re" */
			{
			status = PHVOLT_SCANNER_RETCODE_EOF;
			break;
		}
/* #line 755 "scanner.c" */
kk72:
			kkch = *++KKCURSOR;
			goto kk28;
kk73:
			++KKCURSOR;
			kkch = *KKCURSOR;
kk74:
			if (kkbm[0+kkch] & 8) {
				goto kk73;
			}
			goto kk67;
kk75:
			++KKCURSOR;
			if ((kkch = *KKCURSOR) == '=') goto kk77;
/* #line 586 "scanner.re" */
			{
			token->opcode = PHVOLT_T_NOTEQUALS;
			return 0;
		}
/* #line 775 "scanner.c" */
kk77:
			++KKCURSOR;
/* #line 601 "scanner.re" */
			{
			token->opcode = PHVOLT_T_NOTIDENTICAL;
			return 0;
		}
/* #line 783 "scanner.c" */
kk79:
			++KKCURSOR;
/* #line 576 "scanner.re" */
			{
			token->opcode = PHVOLT_T_GREATEREQUAL;
			return 0;
		}
/* #line 791 "scanner.c" */
kk81:
			++KKCURSOR;
			if ((kkch = *KKCURSOR) == '=') goto kk83;
/* #line 581 "scanner.re" */
			{
			token->opcode = PHVOLT_T_EQUALS;
			return 0;
		}
/* #line 800 "scanner.c" */
kk83:
			++KKCURSOR;
/* #line 596 "scanner.re" */
			{
			token->opcode = PHVOLT_T_IDENTICAL;
			return 0;
		}
/* #line 808 "scanner.c" */
kk85:
			++KKCURSOR;
/* #line 591 "scanner.re" */
			{
			token->opcode = PHVOLT_T_NOTEQUALS;
			return 0;
		}
/* #line 816 "scanner.c" */
kk87:
			++KKCURSOR;
/* #line 546 "scanner.re" */
			{
			token->opcode = PHVOLT_T_LESSEQUAL;
			return 0;
		}
/* #line 824 "scanner.c" */
kk89:
			++KKCURSOR;
/* #line 501 "scanner.re" */
			{
			token->opcode = PHVOLT_T_RANGE;
			return 0;
		}
/* #line 832 "scanner.c" */
kk91:
			++KKCURSOR;
/* #line 571 "scanner.re" */
			{
			token->opcode = PHVOLT_T_DIV_ASSIGN;
			return 0;
		}
/* #line 840 "scanner.c" */
kk93:
			++KKCURSOR;
/* #line 566 "scanner.re" */
			{
			token->opcode = PHVOLT_T_MUL_ASSIGN;
			return 0;
		}
/* #line 848 "scanner.c" */
kk95:
			++KKCURSOR;
/* #line 556 "scanner.re" */
			{
			token->opcode = PHVOLT_T_ADD_ASSIGN;
			return 0;
		}
/* #line 856 "scanner.c" */
kk97:
			++KKCURSOR;
/* #line 486 "scanner.re" */
			{
			token->opcode = PHVOLT_T_INCR;
			return 0;
		}
/* #line 864 "scanner.c" */
kk99:
			++KKCURSOR;
			kkch = *KKCURSOR;
kk100:
			if (kkbm[0+kkch] & 16) {
				goto kk99;
			}
			goto kk5;
kk101:
			++KKCURSOR;
			kkch = *KKCURSOR;
kk102:
			if (kkbm[0+kkch] & 32) {
				goto kk101;
			}
			if (kkch <= 0x00) goto kk103;
			if (kkch <= '[') goto kk105;
			goto kk104;
kk103:
			KKCURSOR = KKMARKER;
			if (kkaccept <= 1) {
				if (kkaccept <= 0) {
					goto kk3;
				} else {
					goto kk24;
				}
			} else {
				goto kk28;
			}
kk104:
			++KKCURSOR;
			kkch = *KKCURSOR;
			if (kkch == '\n') goto kk103;
			goto kk101;
kk105:
			++KKCURSOR;
/* #line 444 "scanner.re" */
			{
			token->opcode = PHVOLT_T_STRING;
			token->value = estrndup(q, KKCURSOR - q - 1);
			token->len = KKCURSOR - q - 1;
			q = KKCURSOR;
			return 0;
		}
/* #line 909 "scanner.c" */
kk107:
			++KKCURSOR;
			kkch = *KKCURSOR;
kk108:
			if (kkbm[0+kkch] & 64) {
				goto kk107;
			}
			if (kkch <= 0x00) goto kk103;
			if (kkch <= '[') goto kk105;
			++KKCURSOR;
			kkch = *KKCURSOR;
			if (kkch == '\n') goto kk103;
			goto kk107;
kk110:
			++KKCURSOR;
/* #line 423 "scanner.re" */
			{
			s->mode = PHVOLT_MODE_RAW;
			token->opcode = PHVOLT_T_CLOSE_EDELIMITER;
			return 0;
		}
/* #line 931 "scanner.c" */
kk112:
			++KKCURSOR;
/* #line 561 "scanner.re" */
			{
			token->opcode = PHVOLT_T_SUB_ASSIGN;
			return 0;
		}
/* #line 939 "scanner.c" */
kk114:
			++KKCURSOR;
/* #line 491 "scanner.re" */
			{
			token->opcode = PHVOLT_T_DECR;
			return 0;
		}
/* #line 947 "scanner.c" */
kk116:
			kkch = *++KKCURSOR;
			if (kkch == '}') goto kk120;
			goto kk103;
kk117:
			kkch = *++KKCURSOR;
			if (kkch != '}') goto kk103;
			++KKCURSOR;
/* #line 409 "scanner.re" */
			{
			s->mode = PHVOLT_MODE_RAW;
			s->whitespace_control = 1;
			token->opcode = PHVOLT_T_CLOSE_DELIMITER;
			return 0;
		}
/* #line 963 "scanner.c" */
kk120:
			++KKCURSOR;
/* #line 436 "scanner.re" */
			{
			s->mode = PHVOLT_MODE_RAW;
			s->whitespace_control = 1;
			token->opcode = PHVOLT_T_CLOSE_EDELIMITER;
			return 0;
		}
/* #line 973 "scanner.c" */
kk122:
			++KKCURSOR;
/* #line 397 "scanner.re" */
			{
			s->mode = PHVOLT_MODE_RAW;
			token->opcode = PHVOLT_T_CLOSE_DELIMITER;
			return 0;
		}
/* #line 982 "scanner.c" */
kk124:
			++KKCURSOR;
			if ((kkch = *KKCURSOR) == '-') goto kk130;
/* #line 416 "scanner.re" */
			{
			s->whitespace_control = 0;
			s->statement_position++;
			token->opcode = PHVOLT_T_OPEN_EDELIMITER;
			return 0;
		}
/* #line 993 "scanner.c" */
kk126:
			++KKCURSOR;
			if ((kkch = *KKCURSOR) == '-') goto kk128;
/* #line 391 "scanner.re" */
			{
			s->whitespace_control = 0;
			token->opcode = PHVOLT_T_OPEN_DELIMITER;
			return 0;
		}
/* #line 1003 "scanner.c" */
kk128:
			++KKCURSOR;
/* #line 403 "scanner.re" */
			{
			s->whitespace_control = 0;
			token->opcode = PHVOLT_T_OPEN_DELIMITER;
			return 0;
		}
/* #line 1012 "scanner.c" */
kk130:
			++KKCURSOR;
/* #line 429 "scanner.re" */
			{
			s->whitespace_control = 0;
			s->statement_position++;
			token->opcode = PHVOLT_T_OPEN_EDELIMITER;
			return 0;
		}
/* #line 1022 "scanner.c" */
kk132:
			kkch = *++KKCURSOR;
			if (kkch == 'F') goto kk135;
			if (kkch == 'f') goto kk135;
			goto kk100;
kk133:
			++KKCURSOR;
			if (kkbm[0+(kkch = *KKCURSOR)] & 16) {
				goto kk99;
			}
/* #line 361 "scanner.re" */
			{
			s->statement_position++;
			token->opcode = PHVOLT_T_DO;
			return 0;
		}
/* #line 1039 "scanner.c" */
kk135:
			kkch = *++KKCURSOR;
			if (kkch == 'I') goto kk136;
			if (kkch != 'i') goto kk100;
kk136:
			kkch = *++KKCURSOR;
			if (kkch == 'N') goto kk137;
			if (kkch != 'n') goto kk100;
kk137:
			kkch = *++KKCURSOR;
			if (kkch == 'E') goto kk138;
			if (kkch != 'e') goto kk100;
kk138:
			kkch = *++KKCURSOR;
			if (kkch == 'D') goto kk139;
			if (kkch != 'd') goto kk100;
kk139:
			++KKCURSOR;
			if (kkbm[0+(kkch = *KKCURSOR)] & 16) {
				goto kk99;
			}
/* #line 332 "scanner.re" */
			{
			s->statement_position++;
			token->opcode = PHVOLT_T_DEFINED;
			return 0;
		}
/* #line 1067 "scanner.c" */
kk141:
			kkch = *++KKCURSOR;
			if (kkch <= 'T') {
				if (kkch == 'Q') goto kk143;
				if (kkch <= 'S') goto kk100;
			} else {
				if (kkch <= 'q') {
					if (kkch <= 'p') goto kk100;
					goto kk143;
				} else {
					if (kkch != 't') goto kk100;
				}
			}
			kkch = *++KKCURSOR;
			if (kkch == 'U') goto kk149;
			if (kkch == 'u') goto kk149;
			goto kk100;
kk143:
			kkch = *++KKCURSOR;
			if (kkch == 'U') goto kk144;
			if (kkch != 'u') goto kk100;
kk144:
			kkch = *++KKCURSOR;
			if (kkch == 'I') goto kk145;
			if (kkch != 'i') goto kk100;
kk145:
			kkch = *++KKCURSOR;
			if (kkch == 'R') goto kk146;
			if (kkch != 'r') goto kk100;
kk146:
			kkch = *++KKCURSOR;
			if (kkch == 'E') goto kk147;
			if (kkch != 'e') goto kk100;
kk147:
			++KKCURSOR;
			if (kkbm[0+(kkch = *KKCURSOR)] & 16) {
				goto kk99;
			}
/* #line 344 "scanner.re" */
			{
			s->statement_position++;
			token->opcode = PHVOLT_T_REQUIRE;
			return 0;
		}
/* #line 1112 "scanner.c" */
kk149:
			kkch = *++KKCURSOR;
			if (kkch == 'R') goto kk150;
			if (kkch != 'r') goto kk100;
kk150:
			kkch = *++KKCURSOR;
			if (kkch == 'N') goto kk151;
			if (kkch != 'n') goto kk100;
kk151:
			++KKCURSOR;
			if (kkbm[0+(kkch = *KKCURSOR)] & 16) {
				goto kk99;
			}
/* #line 309 "scanner.re" */
			{
			token->opcode = PHVOLT_T_RETURN;
			return 0;
		}
/* #line 1131 "scanner.c" */
kk153:
			kkch = *++KKCURSOR;
			if (kkch == 'T') goto kk154;
			if (kkch != 't') goto kk100;
kk154:
			kkch = *++KKCURSOR;
			if (kkch == 'H') goto kk155;
			if (kkch != 'h') goto kk100;
kk155:
			++KKCURSOR;
			if (kkbm[0+(kkch = *KKCURSOR)] & 16) {
				goto kk99;
			}
/* #line 304 "scanner.re" */
			{
			token->opcode = PHVOLT_T_WITH;
			return 0;
		}
/* #line 1150 "scanner.c" */
kk157:
			kkch = *++KKCURSOR;
			if (kkch <= 'L') {
				if (kkch == 'C') goto kk167;
				if (kkch <= 'K') goto kk100;
				goto kk166;
			} else {
				if (kkch <= 'c') {
					if (kkch <= 'b') goto kk100;
					goto kk167;
				} else {
					if (kkch == 'l') goto kk166;
					goto kk100;
				}
			}
kk158:
			kkch = *++KKCURSOR;
			if (kkch == 'N') goto kk159;
			if (kkch != 'n') goto kk100;
kk159:
			kkch = *++KKCURSOR;
			if (kkch == 'T') goto kk160;
			if (kkch != 't') goto kk100;
kk160:
			kkch = *++KKCURSOR;
			if (kkch == 'I') goto kk161;
			if (kkch != 'i') goto kk100;
kk161:
			kkch = *++KKCURSOR;
			if (kkch == 'N') goto kk162;
			if (kkch != 'n') goto kk100;
kk162:
			kkch = *++KKCURSOR;
			if (kkch == 'U') goto kk163;
			if (kkch != 'u') goto kk100;
kk163:
			kkch = *++KKCURSOR;
			if (kkch == 'E') goto kk164;
			if (kkch != 'e') goto kk100;
kk164:
			++KKCURSOR;
			if (kkbm[0+(kkch = *KKCURSOR)] & 16) {
				goto kk99;
			}
/* #line 379 "scanner.re" */
			{
			s->statement_position++;
			token->opcode = PHVOLT_T_CONTINUE;
			return 0;
		}
/* #line 1201 "scanner.c" */
kk166:
			kkch = *++KKCURSOR;
			if (kkch == 'L') goto kk171;
			if (kkch == 'l') goto kk171;
			goto kk100;
kk167:
			kkch = *++KKCURSOR;
			if (kkch == 'H') goto kk168;
			if (kkch != 'h') goto kk100;
kk168:
			kkch = *++KKCURSOR;
			if (kkch == 'E') goto kk169;
			if (kkch != 'e') goto kk100;
kk169:
			++KKCURSOR;
			if (kkbm[0+(kkch = *KKCURSOR)] & 16) {
				goto kk99;
			}
/* #line 350 "scanner.re" */
			{
			s->statement_position++;
			token->opcode = PHVOLT_T_CACHE;
			return 0;
		}
/* #line 1226 "scanner.c" */
kk171:
			++KKCURSOR;
			if (kkbm[0+(kkch = *KKCURSOR)] & 16) {
				goto kk99;
			}
/* #line 293 "scanner.re" */
			{
			s->statement_position++;
			token->opcode = PHVOLT_T_CALL;
			return 0;
		}
/* #line 1238 "scanner.c" */
kk173:
			kkch = *++KKCURSOR;
			if (kkch == 'C') goto kk174;
			if (kkch != 'c') goto kk100;
kk174:
			kkch = *++KKCURSOR;
			if (kkch == 'R') goto kk175;
			if (kkch != 'r') goto kk100;
kk175:
			kkch = *++KKCURSOR;
			if (kkch == 'O') goto kk176;
			if (kkch != 'o') goto kk100;
kk176:
			++KKCURSOR;
			if (kkbm[0+(kkch = *KKCURSOR)] & 16) {
				goto kk99;
			}
/* #line 282 "scanner.re" */
			{
			s->statement_position++;
			token->opcode = PHVOLT_T_MACRO;
			return 0;
		}
/* #line 1262 "scanner.c" */
kk178:
			kkch = *++KKCURSOR;
			if (kkch == 'O') goto kk184;
			if (kkch == 'o') goto kk184;
			goto kk100;
kk179:
			kkch = *++KKCURSOR;
			if (kkch == 'E') goto kk180;
			if (kkch != 'e') goto kk100;
kk180:
			kkch = *++KKCURSOR;
			if (kkch == 'A') goto kk181;
			if (kkch != 'a') goto kk100;
kk181:
			kkch = *++KKCURSOR;
			if (kkch == 'K') goto kk182;
			if (kkch != 'k') goto kk100;
kk182:
			++KKCURSOR;
			if (kkbm[0+(kkch = *KKCURSOR)] & 16) {
				goto kk99;
			}
/* #line 385 "scanner.re" */
			{
			s->statement_position++;
			token->opcode = PHVOLT_T_BREAK;
			return 0;
		}
/* #line 1291 "scanner.c" */
kk184:
			kkch = *++KKCURSOR;
			if (kkch == 'C') goto kk185;
			if (kkch != 'c') goto kk100;
kk185:
			kkch = *++KKCURSOR;
			if (kkch == 'K') goto kk186;
			if (kkch != 'k') goto kk100;
kk186:
			++KKCURSOR;
			if (kkbm[0+(kkch = *KKCURSOR)] & 16) {
				goto kk99;
			}
/* #line 271 "scanner.re" */
			{
			s->statement_position++;
			token->opcode = PHVOLT_T_BLOCK;
			return 0;
		}
/* #line 1311 "scanner.c" */
kk188:
			++KKCURSOR;
			if (kkbm[0+(kkch = *KKCURSOR)] & 16) {
				goto kk99;
			}
/* #line 266 "scanner.re" */
			{
			token->opcode = PHVOLT_T_OR;
			return 0;
		}
/* #line 1322 "scanner.c" */
kk190:
			kkch = *++KKCURSOR;
			if (kkch == 'D') goto kk201;
			if (kkch == 'd') goto kk201;
			goto kk100;
kk191:
			kkch = *++KKCURSOR;
			if (kkch == 'T') goto kk192;
			if (kkch != 't') goto kk100;
kk192:
			kkch = *++KKCURSOR;
			if (kkch == 'O') goto kk193;
			if (kkch != 'o') goto kk100;
kk193:
			kkch = *++KKCURSOR;
			if (kkch == 'E') goto kk194;
			if (kkch != 'e') goto kk100;
kk194:
			kkch = *++KKCURSOR;
			if (kkch == 'S') goto kk195;
			if (kkch != 's') goto kk100;
kk195:
			kkch = *++KKCURSOR;
			if (kkch == 'C') goto kk196;
			if (kkch != 'c') goto kk100;
kk196:
			kkch = *++KKCURSOR;
			if (kkch == 'A') goto kk197;
			if (kkch != 'a') goto kk100;
kk197:
			kkch = *++KKCURSOR;
			if (kkch == 'P') goto kk198;
			if (kkch != 'p') goto kk100;
kk198:
			kkch = *++KKCURSOR;
			if (kkch == 'E') goto kk199;
			if (kkch != 'e') goto kk100;
kk199:
			++KKCURSOR;
			if (kkbm[0+(kkch = *KKCURSOR)] & 16) {
				goto kk99;
			}
/* #line 367 "scanner.re" */
			{
			s->statement_position++;
			token->opcode = PHVOLT_T_AUTOESCAPE;
			return 0;
		}
/* #line 1371 "scanner.c" */
kk201:
			++KKCURSOR;
			if (kkbm[0+(kkch = *KKCURSOR)] & 16) {
				goto kk99;
			}
/* #line 261 "scanner.re" */
			{
			token->opcode = PHVOLT_T_AND;
			return 0;
		}
/* #line 1382 "scanner.c" */
kk203:
			kkch = *++KKCURSOR;
			if (kkch == 'U') goto kk204;
			if (kkch != 'u') goto kk100;
kk204:
			kkch = *++KKCURSOR;
			if (kkch == 'E') goto kk205;
			if (kkch != 'e') goto kk100;
kk205:
			++KKCURSOR;
			if (kkbm[0+(kkch = *KKCURSOR)] & 16) {
				goto kk99;
			}
/* #line 256 "scanner.re" */
			{
			token->opcode = PHVOLT_T_TRUE;
			return 0;
		}
/* #line 1401 "scanner.c" */
kk207:
			kkch = *++KKCURSOR;
			if (kkch == 'T') goto kk212;
			if (kkch == 't') goto kk212;
			goto kk100;
kk208:
			kkch = *++KKCURSOR;
			if (kkch == 'L') goto kk209;
			if (kkch != 'l') goto kk100;
kk209:
			kkch = *++KKCURSOR;
			if (kkch == 'L') goto kk210;
			if (kkch != 'l') goto kk100;
kk210:
			++KKCURSOR;
			if (kkbm[0+(kkch = *KKCURSOR)] & 16) {
				goto kk99;
			}
/* #line 246 "scanner.re" */
			{
			token->opcode = PHVOLT_T_NULL;
			return 0;
		}
/* #line 1425 "scanner.c" */
kk212:
			++KKCURSOR;
			if (kkbm[0+(kkch = *KKCURSOR)] & 16) {
				goto kk99;
			}
/* #line 326 "scanner.re" */
			{
			s->statement_position++;
			token->opcode = PHVOLT_T_NOT;
			return 0;
		}
/* #line 1437 "scanner.c" */
kk214:
			kkch = *++KKCURSOR;
			if (kkch == 'T') goto kk215;
			if (kkch != 't') goto kk100;
kk215:
			++KKCURSOR;
			if (kkbm[0+(kkch = *KKCURSOR)] & 16) {
				goto kk99;
			}
/* #line 241 "scanner.re" */
			{
			token->opcode = PHVOLT_T_SET;
			return 0;
		}
/* #line 1452 "scanner.c" */
kk217:
			kkch = *++KKCURSOR;
			if (kkch == 'L') goto kk221;
			if (kkch == 'l') goto kk221;
			goto kk100;
kk218:
			kkch = *++KKCURSOR;
			if (kkch == 'R') goto kk219;
			if (kkch != 'r') goto kk100;
kk219:
			++KKCURSOR;
			if (kkbm[0+(kkch = *KKCURSOR)] & 16) {
				goto kk99;
			}
/* #line 225 "scanner.re" */
			{
			s->statement_position++;
			token->opcode = PHVOLT_T_FOR;
			return 0;
		}
/* #line 1473 "scanner.c" */
kk221:
			kkch = *++KKCURSOR;
			if (kkch == 'S') goto kk222;
			if (kkch != 's') goto kk100;
kk222:
			kkch = *++KKCURSOR;
			if (kkch == 'E') goto kk223;
			if (kkch != 'e') goto kk100;
kk223:
			++KKCURSOR;
			if (kkbm[0+(kkch = *KKCURSOR)] & 16) {
				goto kk99;
			}
/* #line 251 "scanner.re" */
			{
			token->opcode = PHVOLT_T_FALSE;
			return 0;
		}
/* #line 1492 "scanner.c" */
kk225:
			kkch = *++KKCURSOR;
			if (kkch == 'S') goto kk274;
			if (kkch == 's') goto kk274;
			goto kk100;
kk226:
			kkch = *++KKCURSOR;
			if (kkch == 'D') goto kk234;
			if (kkch == 'd') goto kk234;
			goto kk100;
kk227:
			kkch = *++KKCURSOR;
			if (kkch == 'T') goto kk228;
			if (kkch != 't') goto kk100;
kk228:
			kkch = *++KKCURSOR;
			if (kkch == 'E') goto kk229;
			if (kkch != 'e') goto kk100;
kk229:
			kkch = *++KKCURSOR;
			if (kkch == 'N') goto kk230;
			if (kkch != 'n') goto kk100;
kk230:
			kkch = *++KKCURSOR;
			if (kkch == 'D') goto kk231;
			if (kkch != 'd') goto kk100;
kk231:
			kkch = *++KKCURSOR;
			if (kkch == 'S') goto kk232;
			if (kkch != 's') goto kk100;
kk232:
			++KKCURSOR;
			if (kkbm[0+(kkch = *KKCURSOR)] & 16) {
				goto kk99;
			}
/* #line 314 "scanner.re" */
			{
			s->statement_position++;
			token->opcode = PHVOLT_T_EXTENDS;
			return 0;
		}
/* #line 1534 "scanner.c" */
kk234:
			kkch = *++KKCURSOR;
			switch (kkch) {
			case 'A':
			case 'a':	goto kk235;
			case 'B':
			case 'b':	goto kk236;
			case 'C':
			case 'c':	goto kk237;
			case 'F':
			case 'f':	goto kk238;
			case 'I':
			case 'i':	goto kk239;
			case 'M':
			case 'm':	goto kk240;
			default:	goto kk100;
			}
kk235:
			kkch = *++KKCURSOR;
			if (kkch == 'U') goto kk264;
			if (kkch == 'u') goto kk264;
			goto kk100;
kk236:
			kkch = *++KKCURSOR;
			if (kkch == 'L') goto kk259;
			if (kkch == 'l') goto kk259;
			goto kk100;
kk237:
			kkch = *++KKCURSOR;
			if (kkch == 'A') goto kk251;
			if (kkch == 'a') goto kk251;
			goto kk100;
kk238:
			kkch = *++KKCURSOR;
			if (kkch == 'O') goto kk248;
			if (kkch == 'o') goto kk248;
			goto kk100;
kk239:
			kkch = *++KKCURSOR;
			if (kkch == 'F') goto kk246;
			if (kkch == 'f') goto kk246;
			goto kk100;
kk240:
			kkch = *++KKCURSOR;
			if (kkch == 'A') goto kk241;
			if (kkch != 'a') goto kk100;
kk241:
			kkch = *++KKCURSOR;
			if (kkch == 'C') goto kk242;
			if (kkch != 'c') goto kk100;
kk242:
			kkch = *++KKCURSOR;
			if (kkch == 'R') goto kk243;
			if (kkch != 'r') goto kk100;
kk243:
			kkch = *++KKCURSOR;
			if (kkch == 'O') goto kk244;
			if (kkch != 'o') goto kk100;
kk244:
			++KKCURSOR;
			if (kkbm[0+(kkch = *KKCURSOR)] & 16) {
				goto kk99;
			}
/* #line 288 "scanner.re" */
			{
			token->opcode = PHVOLT_T_ENDMACRO;
			return 0;
		}
/* #line 1603 "scanner.c" */
kk246:
			++KKCURSOR;
			if (kkbm[0+(kkch = *KKCURSOR)] & 16) {
				goto kk99;
			}
/* #line 220 "scanner.re" */
			{
			token->opcode = PHVOLT_T_ENDIF;
			return 0;
		}
/* #line 1614 "scanner.c" */
kk248:
			kkch = *++KKCURSOR;
			if (kkch == 'R') goto kk249;
			if (kkch != 'r') goto kk100;
kk249:
			++KKCURSOR;
			if (kkbm[0+(kkch = *KKCURSOR)] & 16) {
				goto kk99;
			}
/* #line 231 "scanner.re" */
			{
			token->opcode = PHVOLT_T_ENDFOR;
			return 0;
		}
/* #line 1629 "scanner.c" */
kk251:
			kkch = *++KKCURSOR;
			if (kkch <= 'L') {
				if (kkch == 'C') goto kk252;
				if (kkch <= 'K') goto kk100;
				goto kk253;
			} else {
				if (kkch <= 'c') {
					if (kkch <= 'b') goto kk100;
				} else {
					if (kkch == 'l') goto kk253;
					goto kk100;
				}
			}
kk252:
			kkch = *++KKCURSOR;
			if (kkch == 'H') goto kk256;
			if (kkch == 'h') goto kk256;
			goto kk100;
kk253:
			kkch = *++KKCURSOR;
			if (kkch == 'L') goto kk254;
			if (kkch != 'l') goto kk100;
kk254:
			++KKCURSOR;
			if (kkbm[0+(kkch = *KKCURSOR)] & 16) {
				goto kk99;
			}
/* #line 299 "scanner.re" */
			{
			token->opcode = PHVOLT_T_ENDCALL;
			return 0;
		}
/* #line 1663 "scanner.c" */
kk256:
			kkch = *++KKCURSOR;
			if (kkch == 'E') goto kk257;
			if (kkch != 'e') goto kk100;
kk257:
			++KKCURSOR;
			if (kkbm[0+(kkch = *KKCURSOR)] & 16) {
				goto kk99;
			}
/* #line 356 "scanner.re" */
			{
			token->opcode = PHVOLT_T_ENDCACHE;
			return 0;
		}
/* #line 1678 "scanner.c" */
kk259:
			kkch = *++KKCURSOR;
			if (kkch == 'O') goto kk260;
			if (kkch != 'o') goto kk100;
kk260:
			kkch = *++KKCURSOR;
			if (kkch == 'C') goto kk261;
			if (kkch != 'c') goto kk100;
kk261:
			kkch = *++KKCURSOR;
			if (kkch == 'K') goto kk262;
			if (kkch != 'k') goto kk100;
kk262:
			++KKCURSOR;
			if (kkbm[0+(kkch = *KKCURSOR)] & 16) {
				goto kk99;
			}
/* #line 277 "scanner.re" */
			{
			token->opcode = PHVOLT_T_ENDBLOCK;
			return 0;
		}
/* #line 1701 "scanner.c" */
kk264:
			kkch = *++KKCURSOR;
			if (kkch == 'T') goto kk265;
			if (kkch != 't') goto kk100;
kk265:
			kkch = *++KKCURSOR;
			if (kkch == 'O') goto kk266;
			if (kkch != 'o') goto kk100;
kk266:
			kkch = *++KKCURSOR;
			if (kkch == 'E') goto kk267;
			if (kkch != 'e') goto kk100;
kk267:
			kkch = *++KKCURSOR;
			if (kkch == 'S') goto kk268;
			if (kkch != 's') goto kk100;
kk268:
			kkch = *++KKCURSOR;
			if (kkch == 'C') goto kk269;
			if (kkch != 'c') goto kk100;
kk269:
			kkch = *++KKCURSOR;
			if (kkch == 'A') goto kk270;
			if (kkch != 'a') goto kk100;
kk270:
			kkch = *++KKCURSOR;
			if (kkch == 'P') goto kk271;
			if (kkch != 'p') goto kk100;
kk271:
			kkch = *++KKCURSOR;
			if (kkch == 'E') goto kk272;
			if (kkch != 'e') goto kk100;
kk272:
			++KKCURSOR;
			if (kkbm[0+(kkch = *KKCURSOR)] & 16) {
				goto kk99;
			}
/* #line 373 "scanner.re" */
			{
			s->statement_position++;
			token->opcode = PHVOLT_T_ENDAUTOESCAPE;
			return 0;
		}
/* #line 1745 "scanner.c" */
kk274:
			kkch = *++KKCURSOR;
			if (kkch == 'E') goto kk275;
			if (kkch != 'e') goto kk100;
kk275:
			++KKCURSOR;
			if ((kkch = *KKCURSOR) <= '[') {
				if (kkch <= 'E') {
					if (kkch <= '/') goto kk276;
					if (kkch <= '9') goto kk99;
					if (kkch >= 'A') goto kk99;
				} else {
					if (kkch <= 'H') {
						if (kkch <= 'F') goto kk277;
						goto kk99;
					} else {
						if (kkch <= 'I') goto kk278;
						if (kkch <= 'Z') goto kk99;
					}
				}
			} else {
				if (kkch <= 'e') {
					if (kkch <= '^') {
						if (kkch <= '\\') goto kk99;
					} else {
						if (kkch != '`') goto kk99;
					}
				} else {
					if (kkch <= 'h') {
						if (kkch <= 'f') goto kk277;
						goto kk99;
					} else {
						if (kkch <= 'i') goto kk278;
						if (kkch <= 'z') goto kk99;
					}
				}
			}
kk276:
/* #line 205 "scanner.re" */
			{
			token->opcode = PHVOLT_T_ELSE;
			return 0;
		}
/* #line 1789 "scanner.c" */
kk277:
			kkch = *++KKCURSOR;
			if (kkch == 'O') goto kk281;
			if (kkch == 'o') goto kk281;
			goto kk100;
kk278:
			kkch = *++KKCURSOR;
			if (kkch == 'F') goto kk279;
			if (kkch != 'f') goto kk100;
kk279:
			++KKCURSOR;
			if (kkbm[0+(kkch = *KKCURSOR)] & 16) {
				goto kk99;
			}
/* #line 215 "scanner.re" */
			{
			token->opcode = PHVOLT_T_ELSEIF;
			return 0;
		}
/* #line 1809 "scanner.c" */
kk281:
			kkch = *++KKCURSOR;
			if (kkch == 'R') goto kk282;
			if (kkch != 'r') goto kk100;
kk282:
			++KKCURSOR;
			if (kkbm[0+(kkch = *KKCURSOR)] & 16) {
				goto kk99;
			}
/* #line 210 "scanner.re" */
			{
			token->opcode = PHVOLT_T_ELSEFOR;
			return 0;
		}
/* #line 1824 "scanner.c" */
kk284:
			++KKCURSOR;
			if (kkbm[0+(kkch = *KKCURSOR)] & 16) {
				goto kk99;
			}
/* #line 199 "scanner.re" */
			{
			s->statement_position++;
			token->opcode = PHVOLT_T_IF;
			return 0;
		}
/* #line 1836 "scanner.c" */
kk286:
			++KKCURSOR;
			if ((kkch = *KKCURSOR) <= '[') {
				if (kkch <= '@') {
					if (kkch <= '/') goto kk287;
					if (kkch <= '9') goto kk99;
				} else {
					if (kkch == 'C') goto kk290;
					if (kkch <= 'Z') goto kk99;
				}
			} else {
				if (kkch <= '`') {
					if (kkch <= '\\') goto kk99;
					if (kkch == '_') goto kk99;
				} else {
					if (kkch == 'c') goto kk290;
					if (kkch <= 'z') goto kk99;
				}
			}
kk287:
/* #line 236 "scanner.re" */
			{
			token->opcode = PHVOLT_T_IN;
			return 0;
		}
/* #line 1862 "scanner.c" */
kk288:
			++KKCURSOR;
			if (kkbm[0+(kkch = *KKCURSOR)] & 16) {
				goto kk99;
			}
/* #line 320 "scanner.re" */
			{
			s->statement_position++;
			token->opcode = PHVOLT_T_IS;
			return 0;
		}
/* #line 1874 "scanner.c" */
kk290:
			kkch = *++KKCURSOR;
			if (kkch == 'L') goto kk291;
			if (kkch != 'l') goto kk100;
kk291:
			kkch = *++KKCURSOR;
			if (kkch == 'U') goto kk292;
			if (kkch != 'u') goto kk100;
kk292:
			kkch = *++KKCURSOR;
			if (kkch == 'D') goto kk293;
			if (kkch != 'd') goto kk100;
kk293:
			kkch = *++KKCURSOR;
			if (kkch == 'E') goto kk294;
			if (kkch != 'e') goto kk100;
kk294:
			++KKCURSOR;
			if (kkbm[0+(kkch = *KKCURSOR)] & 16) {
				goto kk99;
			}
/* #line 338 "scanner.re" */
			{
			s->statement_position++;
			token->opcode = PHVOLT_T_INCLUDE;
			return 0;
		}
/* #line 1902 "scanner.c" */
kk296:
			kkch = *++KKCURSOR;
			if (kkch <= '/') goto kk103;
			if (kkch <= '9') goto kk299;
			goto kk103;
kk297:
			kkaccept = 0;
			KKMARKER = ++KKCURSOR;
			kkch = *KKCURSOR;
kk298:
			if (kkbm[0+kkch] & 128) {
				goto kk297;
			}
			if (kkch == '.') goto kk296;
			goto kk3;
kk299:
			++KKCURSOR;
			kkch = *KKCURSOR;
			if (kkch <= '/') goto kk301;
			if (kkch <= '9') goto kk299;
kk301:
/* #line 191 "scanner.re" */
			{
			token->opcode = PHVOLT_T_DOUBLE;
			token->value = estrndup(start, KKCURSOR - start);
			token->len = KKCURSOR - start;
			q = KKCURSOR;
			return 0;
		}
/* #line 1932 "scanner.c" */
		}
/* #line 657 "scanner.re" */


		}
	}

	return status;
}
